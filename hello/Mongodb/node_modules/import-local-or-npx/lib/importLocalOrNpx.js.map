{"version":3,"sources":["../src/importLocalOrNpx.ts"],"sourcesContent":["import { npxImport } from \"npx-import\";\n\nimport { importFrom } from \"./importFrom.js\";\nimport { Imported } from \"./types.js\";\n\nexport interface ImportLocalOrNpxSettings {\n\timporter?: ModuleImporter;\n\tlogger?: NpxImportLogger;\n}\n\nexport type ModuleImporter = (source: string) => Promise<object>;\n\nexport type NpxImportLogger = (message: string) => void;\n\nexport async function importLocalOrNpx(\n\tspecifier: string,\n\t{\n\t\timporter = async (source: string) => (await import(source)) as object,\n\t\tlogger,\n\t}: ImportLocalOrNpxSettings = {},\n): Promise<Imported> {\n\tconst importedLocal = await importFrom(process.cwd(), specifier, importer);\n\tif (!(importedLocal instanceof Error)) {\n\t\treturn {\n\t\t\tkind: \"local\",\n\t\t\tresolved: importedLocal,\n\t\t};\n\t}\n\n\ttry {\n\t\tconst importedNpx = await npxImport(specifier, logger);\n\t\treturn {\n\t\t\tkind: \"npx\",\n\t\t\tresolved: importedNpx as object,\n\t\t};\n\t} catch (error) {\n\t\treturn {\n\t\t\tkind: \"failure\",\n\t\t\tlocal: importedLocal,\n\t\t\tnpx: error as Error,\n\t\t};\n\t}\n}\n"],"mappings":"AAAA,SAAS,iBAAiB;AAE1B,SAAS,kBAAkB;AAY3B,eAAsB,iBACrB,WACA;AAAA,EACC,WAAW,OAAO,WAAoB,MAAM,OAAO;AAAA,EACnD;AACD,IAA8B,CAAC,GACX;AACpB,QAAM,gBAAgB,MAAM,WAAW,QAAQ,IAAI,GAAG,WAAW,QAAQ;AACzE,MAAI,EAAE,yBAAyB,QAAQ;AACtC,WAAO;AAAA,MACN,MAAM;AAAA,MACN,UAAU;AAAA,IACX;AAAA,EACD;AAEA,MAAI;AACH,UAAM,cAAc,MAAM,UAAU,WAAW,MAAM;AACrD,WAAO;AAAA,MACN,MAAM;AAAA,MACN,UAAU;AAAA,IACX;AAAA,EACD,SAAS,OAAO;AACf,WAAO;AAAA,MACN,MAAM;AAAA,MACN,OAAO;AAAA,MACP,KAAK;AAAA,IACN;AAAA,EACD;AACD;","names":[]}