{"version":3,"sources":["../src/getGitHubAuthToken.ts"],"sourcesContent":["import * as cp from \"node:child_process\";\nimport * as util from \"node:util\";\n\nimport { GitHubAuthToken } from \"./types.js\";\n\nexport async function getGitHubAuthToken(): Promise<GitHubAuthToken> {\n\tif (process.env.GH_TOKEN) {\n\t\treturn { succeeded: true, token: process.env.GH_TOKEN };\n\t}\n\n\tconst exec = util.promisify(cp.exec);\n\tconst token = await exec(\"gh auth token\");\n\n\tif (token?.stdout) {\n\t\treturn { succeeded: true, token: token.stdout };\n\t}\n\n\tconst help = await exec(\"gh\");\n\n\treturn {\n\t\terror:\n\t\t\t(help.stderr && `Could not run \\`gh\\`: ${help.stderr}`) ||\n\t\t\ttoken?.stderr ||\n\t\t\tundefined,\n\t\tsucceeded: false,\n\t};\n}\n"],"mappings":"AAAA,YAAY,QAAQ;AACpB,YAAY,UAAU;AAItB,eAAsB,qBAA+C;AACpE,MAAI,QAAQ,IAAI,UAAU;AACzB,WAAO,EAAE,WAAW,MAAM,OAAO,QAAQ,IAAI,SAAS;AAAA,EACvD;AAEA,QAAM,OAAO,KAAK,UAAU,GAAG,IAAI;AACnC,QAAM,QAAQ,MAAM,KAAK,eAAe;AAExC,MAAI,OAAO,QAAQ;AAClB,WAAO,EAAE,WAAW,MAAM,OAAO,MAAM,OAAO;AAAA,EAC/C;AAEA,QAAM,OAAO,MAAM,KAAK,IAAI;AAE5B,SAAO;AAAA,IACN,OACE,KAAK,UAAU,yBAAyB,KAAK,MAAM,MACpD,OAAO,UACP;AAAA,IACD,WAAW;AAAA,EACZ;AACD;","names":[]}